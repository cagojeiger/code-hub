# Roadmap 903: 배포 플랫폼

## Status: Rejected

> 프로덕션/프리뷰 배포는 제품 범위에서 제외

---

## 결정 이유

### 1. 과도한 약속

"개발부터 배포까지"를 선언하면:

- 네임스페이스/쿼터 관리
- TLS/도메인 관리
- 네트워크 정책
- 관측성 (로그, 메트릭, 트레이싱)
- SLA 보장

→ 전부 제품 책임이 됨. 사실상 "K8s 플랫폼 팀"이 되는 것.

### 2. 투자자/심사위원 관점

**싫어하는 문장:**
> "개발부터 배포까지 다 됩니다"
> → "GitHub + GitLab + Argo + Coder + Backstage도 같이 하겠다는 거냐?"

**좋아하는 문장:**
> "온프레미스 CDE + 포트 포워딩으로 실시간 공유. 프로덕션은 기존 파이프라인과 공존."
> → 범위가 딱 잘리고, 구매 이유가 선명해짐.

### 3. 전략적 선택

| 기능 | code-hub 책임 | 기존 도구 |
|------|--------------|----------|
| 개발 환경 | ✅ | - |
| 포트 포워딩 | ✅ | - |
| 비용 최적화 | ✅ | - |
| 빌드 | ❌ | GitHub Actions, GitLab CI |
| 배포 | ❌ | ArgoCD, Flux |

---

## 대안

```
code-hub (개발/공유)
       ↓
    git push
       ↓
기존 CI/CD → 기존 배포 파이프라인 → Production
```

---

## 핵심 메시지

> "말만 바꾸는 게 아니라, 책임 범위(약속)를 바꾸는 것.
> 같은 걸 만들어도 '허세 프로젝트'가 아니라 '살아남는 제품'이 된다."

---

## 원본 내용 (참고용)

<details>
<summary>원래 계획했던 아키텍처</summary>

### 전체 아키텍처

```
┌─────────────────────────────────────────────────────────────────────────┐
│  code-hub                                                               │
│                                                                         │
│  ┌─────────────────────────────────┐  ┌─────────────────────────────┐  │
│  │  Workspaces (개발)              │  │  Deployments (실행)         │  │
│  │  namespace: code-hub-workspaces │  │  namespace: group-{name}    │  │
│  │  ┌───────────┐                  │  │  ┌───────────┐              │  │
│  │  │code-server│──build──┐        │  │  │  App Pod  │              │  │
│  │  │           │         │        │  │  │ (Helm)    │              │  │
│  │  └───────────┘         │        │  │  └───────────┘              │  │
│  └────────────────────────│────────┘  └──────────▲──────────────────┘  │
│                           │                      │                      │
│                           ▼                      │                      │
│                    ┌───────────┐          ┌──────┴─────┐               │
│                    │ Registry  │          │  Helm      │               │
│                    │ (MinIO)   │◀─────────│ Controller │               │
│                    └───────────┘   pull   └────────────┘               │
└─────────────────────────────────────────────────────────────────────────┘
```

### 핵심 개념

**그룹 기반 네임스페이스**:
- 그룹 = K8s Namespace
- 그룹 내 사용자들이 리소스 공유
- 그룹 단위로 Quota 적용

**FRP 서비스 노출**:
- 배포된 앱에 자동 도메인 부여
- `{app_name}-{deployment_id}.code-hub.com`

</details>

---

## References

- 피드백: "결국 만드는 건 맞지. 다만 '왜 이기냐 / 왜 지금 / 왜 너냐'가 안 잡히면 안 됨"
